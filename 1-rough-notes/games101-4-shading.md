Time:2025-10-19

Status: 

- [x] **working** ğŸ‘¨â€ğŸ’»
- [ ] *done*    ğŸ’»

Tags:[[3-tags/cg|cg]]

## What have we covered so far?

ç‰©ä½“å’Œç›¸æœºä½ç½®å˜åŒ–
ç‰©ä½“ç›¸å¯¹ç›¸æœºåæ ‡
æŠ•å½±åˆ°å±å¹•
ä¸‰è§’å½¢é‡‡æ ·

next?->ç€è‰²

## Shading

é˜´å½±,é¢œè‰²çš„ä¸åŒ

Blinn-Phongåå°„æ¨¡å‹

ä¸‰ç§åŒºåŸŸ:é«˜å…‰,æ¼«åå°„,ç¯å¢ƒå…‰

å®šä¹‰å‚æ•°:
è§‚å¯Ÿæ–¹å‘:v
é¢æ³•å‘é‡:n
å…‰æ–¹å‘:l
(ä¸‰ä¸ªéƒ½æ˜¯å•ä½å‘é‡)
è¡¨é¢å‚æ•°:é¢œè‰²,äº®åº¦...

(shading is local,ä¸è€ƒè™‘é˜´å½±)

## diffuse reflection

æ¼«åå°„
æ”¶åˆ°å¤šå°‘èƒ½é‡?

![[2-source-material/images/Pasted image 20251019140007.png]]

æ³•çº¿å’Œå…‰çº¿çš„å¤¹è§’->æ¥æ”¶èƒ½é‡å¤šå°‘
å…‰å¼º:$I = \frac{I_0}{r^2}$

$L_d$:diffusely reflected light
$k_d$:diffuse coefficient(color)

$$ L _ {d} = k _ {d} \left(I / r ^ {2}\right) \max (0, \mathbf {n} \cdot \mathbf {l}) $$

max(0,n\*l)?->ç‚¹ä¹˜ä¸º0,ä¸è€ƒè™‘ç‰©ç†æ„ä¹‰

æ¼«åå°„çš„å…‰å‡åŒ€åˆ†å¸ƒ->ä¸è§‚å¯Ÿæ–¹å‘æ— å…³

## Specular Term

å…‰æ»‘ç‰©ä½“è¡¨é¢
åå°„æ¥è¿‘é•œé¢åå°„(lnR)->vå’ŒRæ¥è¿‘

vå’ŒRæ¥è¿‘->åŠç¨‹å‘é‡hå’Œnæ¥è¿‘

![[2-source-material/images/Pasted image 20251019142104.png]]

ä¸ºä»€ä¹ˆæ²¡è€ƒè™‘èƒ½é‡å¸æ”¶n\*l?->Blinn-Phongç®€åŒ–äº†
ä¸ºä»€ä¹ˆç”¨nå’Œhå¤¹è§’ä¸ç”¨vå’ŒR?->è®¡ç®—ç®€å•
æŒ‡æ•°$p$æ˜¯å•¥?->$cos \alpha$çš„ä¸‹é™ç‡å¤ªä½,åŠ æŒ‡æ•°å¢å¤§ä¸‹é™ç‡,é€šå¸¸100-200->æ§åˆ¶é«˜å…‰å¤§å°

## Ambient Term(ç¯å¢ƒå…‰)

å‡è®¾ç¯å¢ƒå…‰å¼ºéƒ½ç›¸åŒ:

$L_a = K_a*l_a$

ç›¸å½“äºä¸€ä¸ªå¸¸æ•°é¢œè‰²,æ— è®ºåœ¨å“ªå„¿éƒ½ä¸€æ ·

## Blinn-Phong Reflection Model

![[2-source-material/images/Pasted image 20251019142735.png]]

## Shading Frequencies(ç€è‰²é¢‘ç‡)

ç€è‰²é¢‘ç‡->ç€è‰²éœ€è¦åº”ç”¨åˆ°å“ªäº›ç‚¹ä¸Š
ä¸€ä¸ªé¢->é¡¶ç‚¹->åƒç´ 

Flat Shading

â€¢ Triangle face is flat â€” one normal vector
â€¢ Not good for smooth surfaces

---

Gouraud shading
â€¢ Interpolate colors from vertices across triangle
â€¢ Each vertex has a normal vector (how?)

æ¯ä¸ªé¡¶ç‚¹æ±‚æ³•çº¿,æ±‚ç€è‰²,å†…éƒ¨é¢œè‰²å·®å€¼å¾—å‡º

---

Phong shading
â€¢ Interpolate normal vectors across each triangle
â€¢ Compute full shading model at each pixel
â€¢ Not the Blinn-Phong Reflectance Model(ç€è‰²æ¨¡å‹å’Œç€è‰²é¢‘ç‡ä¸ä¸€æ ·!)

å¯¹æ¯ä¸ªåƒç´ ç€è‰²

---

é¡¶ç‚¹æ³•å‘é‡:

ä¸€ä¸ªé¡¶ç‚¹å’Œå¤šä¸ªä¸‰è§’å½¢å…³è”->é¡¶ç‚¹æ³•å‘é‡ç”¨ä¸‰è§’å½¢çš„é¢æ³•å‘é‡å¹³å‡
ä¼˜åŒ–:ä¸‰è§’å½¢é¢åŠ æƒå¹³å‡

---

åƒç´ æ³•å‘é‡:

ç”¨é‡å¿ƒåæ ‡

## å›¾å½¢ç®¡çº¿(Graphics Pipeline)

ç©ºé—´ç‚¹->æŠ•å½±åˆ°å±å¹•ä¸Š->å½¢æˆä¸‰è§’å½¢->å…‰æ …åŒ–->ç€è‰²->è¾“å‡º

ç€è‰²å¯èƒ½å‘ç”Ÿåœ¨ä¸åŒé˜¶æ®µ->é¡¶ç‚¹æˆ–è€…åƒç´ 

## Shader

```c 
uniform sampler2D myTexture; 
uniform vec3 lightDir; 
varying vec2 uv; 
varying vec3 norm; 
void diffuseShader() { 
vec3 kd; 
kd = texture2d(myTexture, uv); 
kd  *=clamp(DOT(-lightDir,norm),0.0,1.0); 
gl_FragColor $=$ vec4(kd,1.0); 
```

GPU
 
ç€è‰²å™¨å¯ç¼–ç¨‹
compute shader

## Texture Mapping

ç‚¹çš„æ¸²æŸ“ä¸åŒ,åªæ˜¯kdçš„ä¸åŒ->å¸Œæœ›å®šä¹‰ç‰©ä½“è¡¨é¢ä¸åŒç‚¹çš„å±æ€§

ä»»ä½•3dç‰©ä½“çš„è¡¨é¢->äºŒç»´

çº¹ç†å°±æ˜¯ä¸€å¼ å›¾->è’™åœ¨ç‰©ä½“è¡¨é¢(æ˜ å°„)

ä¸‰è§’å½¢æ˜ å°„(ç¾å·¥,è‡ªåŠ¨åŒ–çš„æ´»å„¿),å‡è®¾æˆ‘ä»¬å·²çŸ¥

ä¸‰è§’å½¢é¡¶ç‚¹è¢«æ˜ å°„åˆ°çº¹ç†åæ ‡ç³»(u,v),èŒƒå›´åœ¨$[0,1]^2$å†…

ä¸€ä¸ªçº¹ç†è¢«æ˜ å°„å¤šæ¬¡->è¾¹ç¼˜å¤„ç›¸æ¥->çº¹ç†æ— ç¼è¡”æ¥


## Barycentric coordinatesï¼ˆé‡å¿ƒåæ ‡ï¼‰


ä¸ºä»€ä¹ˆæ’å€¼ï¼Ÿ
  å¸Œæœ›ä¸‰è§’å½¢å†…éƒ¨çš„å€¼å’Œé¡¶ç‚¹ç›¸å…³
  å¹³æ»‘è¿‡æ¸¡

é€šè¿‡æ’å€¼è¦ä»€ä¹ˆï¼Ÿ
  çº¹ç†,é¢œè‰²,æ³•å‘é‡...

å¦‚ä½•æ’å€¼?
  é‡å¿ƒåæ ‡

what?
  é‡å¿ƒåæ ‡æ˜¯å®šä¹‰åœ¨ä¸€ä¸ªä¸‰è§’å½¢æ‰€åœ¨å¹³é¢å†…çš„
  ä»»æ„(x,y):
  (x, y) = Î±A+Î²B+Î³C
  Î±+Î²+Î³=1
  å¦‚æœä¸‰ä¸ªç³»æ•°éƒ½éè´Ÿ,åˆ™è¯¥ç‚¹åœ¨ä¸‰è§’å½¢å†…éƒ¨

example:A->(Î±,Î²,Î³)=(1,0,0)

é¢ç§¯æ¯”é‡å¿ƒåæ ‡:
  ![[2-source-material/images/Pasted image 20251022221142.png]]

ä¸‰è§’å½¢é‡å¿ƒ:(x,y) = 1/3A+1/3B+1/3C

ä»»æ„ä¸€ä¸ªç‚¹çš„é‡å¿ƒåæ ‡å¯ç”±å…¬å¼æ±‚å‡º:è§slide

so,å±æ€§çº¿æ€§ç»„åˆ->å±æ€§æ’å€¼

**æŠ•å½±ä¼šå¯¼è‡´é‡å¿ƒåæ ‡æ”¹å˜**

so->ä½¿ç”¨ä¸‰ç»´ç©ºé—´çš„åæ ‡æ¥æ’å€¼,ä¸èƒ½ç”¨æŠ•å½±åçš„åæ ‡æ’å€¼

## çº¹ç†åº”ç”¨

![[2-source-material/images/Pasted image 20251022221954.png]]

---

Texture Magnification(çº¹ç†æ”¾å¤§é—®é¢˜)

*çº¹ç†å¤ªå°*->(u,v)ä¸åœ¨æ•´æ•°å¤„->round
(a pixel on a texture--a texel)->å¤šä¸ªpixel->åŒä¸ªtexel
ä¸‰ç§æ–¹æ³•:nearest,bilinear,bicubic

åŒçº¿æ€§æ’å€¼:

æ‰¾åˆ°ä¸€ä¸ªtexelé‚»è¿‘å››ä¸ªç‚¹:
texelè·å·¦ä¸‹è§’ç‚¹çš„æ°´å¹³å‚ç›´è·ç¦»:s,t
çº¿æ€§æ’å€¼:lerp (x,v0,v1)=v0 + x(v1-v0)

![[2-source-material/images/Pasted image 20251022222611.png]]

*çº¹ç†å¤ªå¤§*--aliasing

why?
  è¿œå¤„ä¸€ä¸ªåƒç´ è¦†ç›–äº†å¾ˆå¤§çš„ä¸€ä¸ªçº¹ç†åŒºåŸŸ--ä¸€ä¸ªtexelä¸èƒ½ä»£è¡¨ä¸€ä¸ªåŒºåŸŸ--ä¹Ÿå°±æ˜¯é‡‡æ ·ç‡å¤ªä½

how?
  è¶…é‡‡æ ·->æ¯ä¸ªåƒç´ é‡‡æ ·512ä¸ªç‚¹--å¤ªæ…¢

ä¸é‡‡æ ·å¯ä»¥å—?->èƒ½ä¸èƒ½ç›´æ¥æåˆ°åŒºåŸŸçš„å¹³å‡å€¼?

## Mipmap

å…è®¸èŒƒå›´æŸ¥è¯¢:å¿«,å¤§çº¦,æ”¯æŒæ–¹å½¢èŒƒå›´æŸ¥è¯¢

æŠŠçº¹ç†æ¯æ¬¡ç¼©å°åˆ°åŸæ¥çš„ä¸€åŠ->æå‰ç”Ÿæˆ,ç„¶åå­˜å‚¨

![[2-source-material/images/Pasted image 20251022224024.png]]

"å›¾åƒé‡‘å­—å¡”"

é¢å¤–å­˜å‚¨é‡?->ç­‰æ¯”æ•°åˆ—æ±‚å’Œ--å¤šäº†1/3

å’‹çŸ¥é“åƒç´ å¯¹åº”æŸä¸ªåŒºåŸŸçš„å¤§å°?->
![[2-source-material/images/Pasted image 20251022224754.png]]

é—®é¢˜:æ¯ä¸€å±‚ä¹‹é—´å¤ªè·³è„±->ä¸è¿ç»­
æ’å€¼!->ä¸‰çº¿å‹æ’å€¼--level Dæ’å€¼ level D+1æ’å€¼--ä¸¤ä¸ªç»“æœå†æ’å€¼

*è¿˜æœ‰ä¸€äº›é—®é¢˜!*

ä¼šå¯¼è‡´è¿œå¤„ç»†èŠ‚ä¸¢å¤±,è¿‡æ¨¡ç³Š!

---

é‡‡ç”¨å„å‘å¼‚æ€§è¿‡æ»¤è§£å†³è¯¥é—®é¢˜

mipmapåªæŠŠé•¿å®½åŒæ—¶å‡å°ä¸€åŠ,ä¹Ÿå°±æ˜¯åªåšäº†å¯¹è§’çº¿:
é‡‡ç”¨ripmap

![[2-source-material/images/Pasted image 20251022225831.png]]

å¯¹çŸ©å½¢åŒºåŸŸå‹å¥½,ä½†æ˜¯ä¸å¥½åšæ–œåŒºåŸŸçš„æŸ¥è¯¢

EWA filtering
  å¤šæ¬¡æŸ¥è¯¢
  åŠ æƒå¹³å‡
  
## Reference

[[2-source-material/slides/GAMES101_Lecture_07.pdf|GAMES101_Lecture_07]]

[[2-source-material/slides/GAMES101_Lecture_08.pdf|GAMES101_Lecture_08]]

[[2-source-material/slides/GAMES101_Lecture_09.pdf|GAMES101_Lecture_09]]