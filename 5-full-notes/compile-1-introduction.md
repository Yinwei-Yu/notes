Time:2025-09-12

Status: 

- [ ] **working** 👨‍💻
- [x] *done*    💻

Tags:[[3-tags/compile]]

## 程序翻译

   编译
高级--->目标
语义等价

翻译方式:
  编译->生成目标代码
  解释->无

---

*编译*

分阶段

目标是机器语言:
1. 翻译阶段:高级->目标程序
2. 运行阶段:数据->程序->结果

目标是汇编语言:
1. 编译阶段:高级->汇编
2. 汇编阶段:汇编->机器语言
3. 运行阶段:数据->程序->结果

编译方式下有两个程序:
编程程序:高级语言->汇编语言
汇编程序:汇编程序->机器语言

可被多次使用

**注:**
1. 生成的目标程序不一定是机器语言的程序
2. 编译程序与具体的机器和语言有关
3. 对于编程程序而言,源程序是输入数据,目标程序是输出结果

---

*解释*

按照源程序的语句的动态顺序,逐句分析解释源程序,并立即执行

**不生成目标代码**(key diff),直接执行源程序本身

---

*混合方式*

java:
在一台机器上**编译**得到字节码
由jvm对字节码解释执行

![[2-source-material/images/Pasted image 20250912174737.png]]

## 编译程序的工作步骤

词法分析->语法分析->语义分析->中间代码优化->目标代码生成

---

*词法分析 scanner*

依据词法规则,识别为一个个具有独立的意义的最小语法单位(单词/词素),识别出与其相关的属性(标识符,界限符,数等),转换成长度上统一的标准形式(属性字token)

BNF(Backus-Naur form) Form:
  <>->待描述的语法成分
  ::=->语法成分的定义
  |->or
ENBF:
  \[x]->x可以出现0|1次
  {x}->0|many
  x(y|z)->等价于xy或xz

实际:扫描->归类

\<token-name,attribute-value>

---

*语法分析 parser*

依据**语法规则**，逐一分析词法分析时得到的单词，把单词串分解成各类语法单位，即确定**它们是怎样组成说明和语句**，以及**说明和语句又是怎样组成程序的**。分析时如发现有不合语法规则的地方，便将出错的位置及出错性质打印报告给程序员；如无语法错误，则用另一种中间形式给出正确的语法结构，供下一阶段分析使用。

---

*语义分析 semantic analyzer*

依据语义规则对语法分析得到的语法结构进行静态语义检查,用内部形式表示,或者直接用目标语言表达

---

*代码优化 target code optimizer*

压缩目标程序运行所需的时间和空间,以提高目标程序的质量(更快更短能耗更低可用行好)

---

*代码生成 code generator*

如果语义分析时把源程序表示成中间形式而不是表示成目标指令，则由本部分完成从中间形式到目标指令的转换。如果语义分析时，已直接生成目标指令，则无需另外再做代码生成工作。

目标指令可能是绝对指令代码，或者可重新定位的指令代码或者汇编指令代码。该阶段的工作有赖于硬件系统结构和机器指令含义。

---

*表格管理*

登记每个字段的属性信息等内容,需要一个**符号表**

---

*出错处理*

语法错误:不符合语法和词法规则的错误

语义错误:源程序中不符合语义规则的错误(比如string做除法等)

## 编译器结构

逻辑结构:

![[2-source-material/images/Pasted image 20250919164914.png]]

---

*分析-综合模型*

分析:词法,语法,语义
综合:中间代码生成,代码优化,代码生成

## 组织形式

*pass*

一个pass指编译程序把一个阶段的产物A扫描一遍产生下一个阶段的产物B的过程

根据在翻译过程中需要对源程序和中间等价物扫描的遍数的不同,分为单遍扫描和多遍扫描

单遍

---

*前端,后端*

前端:与源程序有关但是与目标机器无关的部分

后端:编译中与目标机器有关的部分

源程序->**前端**->中间代码->**后端**->目标程序

## 编译程序的构造

机器语言,汇编语言,高级语言

编译程序也有源代码🤨(why someone forget about this?)

高级语言的自编译性
  **自展技术**
    先构造语言的核心部分的编译程序(低级语言)
    再以它为工具构造更大部分的编译程序
    整个语言的编序程序

自动化
  Lex->自动生成词法分析程序
  YACC->自动生成语法分析程序
## Reference
