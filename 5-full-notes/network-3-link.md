Time:2025-09-25

Status: 

- [ ] **working** 👨‍💻
- [x] *done*    💻

Tags:[[3-tags/network|network]]

## 位置和作用

向下利用物理层提供的位流服务
向上为网络层提供明确的服务接口

---

成帧:将比特流划分为帧(frame),主要目的是检测和纠正物理层在传输中可能出现的错误
差错控制:处理位错误,丢失等
流量控制:确保发送方的发送速率

---

无确认,无连接
有确认,无连接
有确认,有连接

## 成帧

方式:

*字节计数法*(无差错情形)

每次物理层传8个二进制位,每个帧的第一个字节表示一个帧包含几个字节(包含第一个字节在内)

如果一个字节出错,那么完蛋

---

*带**字节**填充的定界符法*

定界符(FLAG):一个特殊的字节(0x7E),用于区分前后不同的帧

FLAG | 头标 | 有效载荷 | 尾标 | FLAG
     |      一个帧          |	

要是有效载荷部分包含FLAG咋办?
  对数据部分FLAG字节前插入一个ESC
针对ESC,也要做这种工作
  ==图片here==

由于网络层不知道链路层干了这个事儿,所以又叫做**透明传输**

---

*带**比特**填充的定界符法*

定界符:两个0之间有6个1:0x7E

上述同样的问题?
  有效载荷中连续出现5个1,那么插入一个0
接收方按照相同的规则解读

---

*物理层编码违例*

选择的定界符不会在数据部分出现

## 差错控制

问题:信道噪声造成数据传输问题
差错
丢失
乱序
重复

解决:差错检测和纠正,确认重传
确认
定时器
顺序号

---

*差错检测*

增加冗余信息（校验信息）
冗余信息太多

then?

检错码：检查是否有误
纠错码：检查并纠正错误

码字:n=m+r(m为数据，r为冗余)
码率:m/n
海明距离(hamming distance):两个码子之间不同对应bit的数目
  d+1:检查出d个错
  2d+1:2d检错,d位纠错

---

检错码:

*奇偶校验*

*校验和 tcp/ip*

16位二进制补码求和运算
逢进位,进位加到右侧
结果取反

*循环冗余校验 CRC 链路层*

方法,标准等

---

纠错码:

## 协议

*乌托邦单工协议*

假设:
1. 单工协议:数据单向传输
2. 完美信道
3. 始终就绪
4. 瞬间完成

---

*无错信道上的停等式协议*

不再假设接收方能够处理以无限高速进来的数据
发送方以高于接收方能够处理的速度发送帧,导致接收方被"淹没"

![[2-source-material/images/Pasted image 20250928154251.png]]

确认 ack

## 滑动窗口

停等协议的效率较低
我们采用流水线协议/管道协议:在发送方没有收到确认前连续发送多个帧

we have a cache:R
so:

1. 发送端一次可以发送多少个帧?
2. 某个帧出错或丢失怎么处理?

## 数据链路协议实例

PPP协议

PPPoE组网
## Reference
