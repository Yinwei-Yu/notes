Time:2025-10-27

Status: 

- [ ] **working** 👨‍💻
- [x] *done*    💻

Tags:[cg](3-tags/cg.md)

# 表示几何

**隐式几何:**

*基于点的分类*
不告知点的具体位置,但是可以知道这些点满足的空间关系
eg.$x^2+y^2+z^2=1$

更普遍:$f(x,y,z)=0$

*好坏处:*

不好知道整个形状是什么

容易判断一个点在不在面上,在面内还是面外

**显式几何:**

直接给出点的位置 or
参数映射

eg.$f(u,v)=((2+cos\ u)cos\ v,(2+cos\ u)sin\ v,sin\ u)$

容易表示出形状

但是不好判断给定一个(x,y,z)的点,在不在面上或者面内还是面外

**根据需要来选择表示方法**

## 更多的隐式表示

数学公式:

![](2-source-material/images/Pasted%20image%2020251027104359.png)

对于复杂情况,很难写出数学公式

---

constructive solid geometry(CSG)

使用简单几何的布尔运算来组合成复杂的几何

![](2-source-material/images/Pasted%20image%2020251027104609.png)

---

距离函数

描述任何一个点到某个表面的距离--空间中任何一个点到想要表示的表面上的最小距离

不同的距离函数做blend操作,值为0的点即为需要表示的平面

如果距离函数不好写成式子?->level set

![](2-source-material/images/Pasted%20image%2020251027105609.png)

## 显示表示

*点云*

把物体上的点都表示出来

简单

如何从点云->多边形面?

点云密度低则难以画出来

*多边形面*

尤其是三角形和四边形

处理,模拟,采样简单

数据结构更复杂了

应用最广泛

.obj文件?->一个文本文件,里面描述了向量,发现,纹理坐标,点等分开表示并组织起来

# 曲线

矢量字体,矢量图

## 贝塞尔曲线

一系列控制点定义曲线,起始点和终点,切线方向

---

三点贝塞尔曲线(二次贝塞尔曲线):

de Casteljau Algorithm

递归算法

给定一个时间t,找时间t曲线上的点应该在哪儿->先用t找在已有线段的位置,递归下去,直到找不到,则这个点就是t时间贝塞尔曲线所在的点.

![](2-source-material/images/Pasted%20image%2020251031142040.png)

*代数表示*

多项展开式

n阶贝塞尔曲线上的任意一点,是基本控制点的基本组合

![](2-source-material/images/Pasted%20image%2020251031142634.png)

插值思想

性质:

1. 过起点和终点
2. 对于三次曲线,起始方向(切线)确定
3. 仿射变换下曲线不变
4. 凸包性质(曲线一定在控制点形成的凸包内)

---

*piecewise*

控制点多时,形状不理想

可以采取少量控制点定义小段曲线,然后把曲线连起来

通常采用四个控制点,三次贝塞尔曲线

保证连接点光滑?->切线方向大小相同->最后两个点和起始两个点共线等距

$C^0,C^1$连续性

## 其他曲线

spline(样条曲线)

连续曲线由多个小段曲线组成起来

---

B-splines

基样条

局部性

---

NURBS

# 曲面

贝塞尔曲面

4x4个点做了4条曲线,然后四条曲线上取四个点,四个点再作为控制点生成贝塞尔曲面

二维参数(u,v)映射

# 几何处理

mesh 细分
mesh 简化
mesh 规范化

## 细分

引入更多三角形->三角形位置发生变化->更光滑

*loop subdivision*

一个三角形分成四个

区分新旧顶点,分别按不同逻辑换位置

新:

![](2-source-material/images/Pasted%20image%2020251031150547.png)

旧:

n:度
u:一个数

更新:

![](2-source-material/images/Pasted%20image%2020251031150830.png)

*catmull-clark subdivision*

loop细分的问题:只能用于三角形面

非四边形面
奇异点:度非4的点

引入新点:边取重点,面取中点,连接

一次细分后:

1. 引入两个新奇异点
2. 新奇异点的度为3
3. 非四边形面消失

性质:细分前的非四边形面转换为非奇异点,之后奇异点个数不再增加

## 曲面简化

减少三角形数量

不同距离选用不同的几何模型

*collapsing an edge*

边坍缩:

找一条边,把两个顶点合成一个

哪些边坍缩,哪些不?->二次误差度量

计算新旧点距离平方和->最小

算法过程:从最小距离开始,用贪心

问题:坍缩一条边后其他边受到干扰

1. 取最小
2. 做更新

用一个优先队列,维护

# AI Summarize

## 表示几何

### 隐式几何 (Implicit Geometry)

**定义：** 通过数学关系定义几何形状，不直接给出点的具体坐标位置，而是描述点满足的空间关系。

**数学表示：** $f(x, y, z) = 0$

**经典示例：** 
- 球体：$x^2 + y^2 + z^2 = 1$
- 平面：$ax + by + cz + d = 0$

**优缺点分析：**
- **优点：**
  - 容易判断点与表面的关系（内部/外部/表面）
  - 便于进行布尔运算和构造实体几何
  - 适合表示光滑的数学表面
- **缺点：**
  - 难以直观理解整体形状
  - 采样和渲染相对复杂
  - 不适合表示复杂拓扑结构

### 显式几何 (Explicit Geometry)

**定义：** 直接给出几何表面的点坐标或通过参数映射定义。

**参数映射示例：** 
圆环面：$f(u, v) = ((2 + \cos u)\cos v, (2 + \cos u)\sin v, \sin u)$
其中 $u, v \in [0, 2\pi]$

**优缺点分析：**
- **优点：**
  - 容易采样和渲染
  - 直观表示复杂形状
  - 适合计算机图形学应用
- **缺点：**
  - 难以判断点是否在表面内部
  - 布尔运算复杂
  - 需要更多存储空间

**选择原则：** 根据具体应用需求选择表示方法 - 隐式适合分析和计算，显式适合渲染和显示。

## 更多的隐式表示方法

### 构造实体几何 (Constructive Solid Geometry - CSG)

**原理：** 通过简单几何体（球体、立方体、圆柱体等）的布尔运算（并集、交集、差集）组合成复杂几何体。

**运算类型：**
- **并集 (Union)：** $A \cup B$
- **交集 (Intersection)：** $A \cap B$  
- **差集 (Difference)：** $A - B$

**应用场景：** CAD建模、工业设计、建筑建模

### 距离函数 (Distance Functions)

**定义：** 描述空间中任意点到目标表面的最短距离。

**数学表示：** $d(\mathbf{p}) = \min_{\mathbf{q} \in S} \|\mathbf{p} - \mathbf{q}\|$

**融合操作 (Blending)：** 通过组合多个距离函数，找到距离值为零的等值面来定义复杂形状。

**水平集方法 (Level Set Method)：**
- 将距离函数离散化在网格上
- 通过插值找到零等值面
- 适合处理拓扑变化和复杂变形

## 显式表示方法

### 点云 (Point Cloud)

**定义：** 直接存储几何表面上的离散点集合。

**特点：**
- 数据结构简单
- 适合激光扫描和3D重建
- 密度不足时难以形成连续表面

**从点云到多边形面：**
- 需要表面重建算法
- 常用方法：泊松表面重建、移动立方体算法

### 多边形网格 (Polygon Mesh)

**定义：** 使用多边形（主要是三角形和四边形）近似表示几何表面。

**.obj文件格式详解：**
```
v x y z          # 顶点坐标
vt u v           # 纹理坐标  
vn x y z         # 法向量
f v1/vt1/vn1 ... # 面定义（顶点/纹理/法向索引）
```

**优势：**
- 硬件加速支持良好
- 成熟的渲染管线
- 丰富的处理算法

## 曲线表示

### 贝塞尔曲线 (Bézier Curves)

**定义：** 由控制点定义的参数曲线，具有明确的起点、终点和切线方向。

#### de Casteljau 算法

**递归过程：**
1. 对于给定的参数 $t \in [0, 1]$
2. 在每对相邻控制点之间线性插值：$\mathbf{b}_i^1(t) = (1-t)\mathbf{b}_i + t\mathbf{b}_{i+1}$
3. 递归应用直到只剩一个点：$\mathbf{b}_0^n(t)$

**代数表示：**
n阶贝塞尔曲线：$\mathbf{B}(t) = \sum_{i=0}^n \binom{n}{i} (1-t)^{n-i} t^i \mathbf{b}_i$

其中伯恩斯坦基函数：$B_i^n(t) = \binom{n}{i} (1-t)^{n-i} t^i$

#### 重要性质

1. **端点插值：** $\mathbf{B}(0) = \mathbf{b}_0$, $\mathbf{B}(1) = \mathbf{b}_n$
2. **端点切线：** $\mathbf{B}'(0) = n(\mathbf{b}_1 - \mathbf{b}_0)$, $\mathbf{B}'(1) = n(\mathbf{b}_n - \mathbf{b}_{n-1})$
3. **仿射不变性：** 对控制点进行仿射变换等价于对曲线进行同样变换
4. **凸包性质：** 曲线完全位于控制点的凸包内
5. **变差缩减性：** 任何直线与曲线的交点不多于与控制点多边形的交点

#### 分段贝塞尔曲线

**动机：** 高阶贝塞尔曲线难以控制，采用低阶曲线分段连接。

**连续性条件：**
- **C⁰连续性：** 相邻曲线段端点重合
- **C¹连续性：** 端点处切线方向相同且大小相等
- **G¹连续性：** 仅切线方向相同

**三次贝塞尔曲线连接：** 确保最后两个控制点与下一段的前两个控制点共线且等距。

## 其他曲线类型

### 样条曲线 (Spline Curves)

**定义：** 由多个低阶多项式曲线段光滑连接而成的曲线。

**B样条 (B-splines)：**
- 局部控制性：修改一个控制点只影响局部曲线段
- 更强的凸包性质
- 自动满足连续性条件

**NURBS (非均匀有理B样条)：**
- 支持权重控制
- 精确表示圆锥曲线
- 工业标准（IGES, STEP）

## 曲面表示

### 贝塞尔曲面 (Bézier Surfaces)

**定义：** 二维参数曲面，由控制点网格定义。

**构造方法：**
1. 在u方向构造贝塞尔曲线
2. 在v方向用曲线上的点作为新控制点
3. 构造最终的贝塞尔曲面

**数学表示：**
$\mathbf{S}(u, v) = \sum_{i=0}^m \sum_{j=0}^n B_i^m(u) B_j^n(v) \mathbf{b}_{i,j}$

## 几何处理技术

### 网格细分 (Mesh Subdivision)

**目标：** 增加网格分辨率，获得更光滑的表面。

#### Loop 细分

**适用条件：** 三角形网格

**细分步骤：**
1. **分裂三角形：** 每个三角形分成4个小三角形
2. **顶点更新：**
   - **新顶点（边中点）：** 
     $\mathbf{v} = \frac{3}{8}(\mathbf{a} + \mathbf{b}) + \frac{1}{8}(\mathbf{c} + \mathbf{d})$
   - **旧顶点：**
     $\mathbf{v}' = (1 - n u)\mathbf{v} + u \sum \mathbf{v}_{\text{neighbor}}$
     其中 $u = \frac{3}{16}$（当 $n=3$），$u = \frac{3}{8n}$（当 $n>3$）

#### Catmull-Clark 细分

**适用条件：** 任意多边形网格

**基本概念：**
- **奇异点 (Extraordinary Vertex)：** 度不为4的顶点
- **非四边形面：** 边数不为4的多边形面

**细分步骤：**
1. **添加面点：** 每个面的重心
2. **添加边点：** 每条边的中点和相邻面点的平均
3. **更新顶点：** 基于相邻面点和边点计算
4. **连接新点形成新网格**

**重要性质：**
- 一次细分后引入的奇异点数量：等于原非四边形面数
- 后续细分不再增加奇异点数量
- 非四边形面全部转换为四边形面

### 曲面简化 (Surface Simplification)

**目标：** 减少三角形数量，同时保持几何特征。

#### 边坍缩 (Edge Collapse)

**基本操作：** 将一条边的两个顶点合并为一个顶点。

#### 二次误差度量 (Quadric Error Metrics)

**定义：** 衡量新顶点到相关平面集合的距离平方和。

**数学表示：**
对于平面 $ax + by + cz + d = 0$，点到平面距离：$\frac{|ax + by + cz + d|}{\sqrt{a^2 + b^2 + c^2}}$

**误差函数：** $\Delta(\mathbf{v}) = \sum_{\text{planes } p} (\mathbf{v}^T \mathbf{p})^2 = \mathbf{v}^T (\sum \mathbf{p}\mathbf{p}^T) \mathbf{v}$

**算法流程（Garland-Heckbert 算法）：**
1. 为每个顶点计算初始二次误差矩阵
2. 为每条边计算最优坍缩位置和误差代价
3. 将所有边按误差代价排序到优先队列
4. 重复移除最小代价边进行坍缩，并更新受影响边的代价
5. 直到达到目标面数或误差阈值

## 术语表

| 术语 | 英文 | 解释 |
|------|------|------|
| 隐式几何 | Implicit Geometry | 通过数学方程定义的几何，不直接给出点坐标 |
| 显式几何 | Explicit Geometry | 直接给出点坐标或通过参数映射定义的几何 |
| CSG | Constructive Solid Geometry | 通过简单几何体的布尔运算构造复杂几何体 |
| 距离函数 | Distance Function | 描述点到表面最短距离的函数 |
| 水平集 | Level Set | 通过距离函数的等值面定义几何形状的方法 |
| 点云 | Point Cloud | 离散点集合表示的几何数据 |
| 多边形网格 | Polygon Mesh | 用多边形面片近似表示的几何表面 |
| 贝塞尔曲线 | Bézier Curve | 由控制点定义的参数曲线 |
| de Casteljau算法 | de Casteljau Algorithm | 递归计算贝塞尔曲线点的算法 |
| 伯恩斯坦基函数 | Bernstein Basis | 贝塞尔曲线的基础多项式函数 |
| 样条曲线 | Spline Curve | 分段多项式曲线 |
| B样条 | B-spline | 具有局部控制性的样条曲线 |
| NURBS | Non-Uniform Rational B-Spline | 非均匀有理B样条 |
| 网格细分 | Mesh Subdivision | 增加网格分辨率的技术 |
| 奇异点 | Extraordinary Vertex | 在细分网格中度不为4的顶点 |
| 边坍缩 | Edge Collapse | 曲面简化中合并两个顶点的操作 |
| 二次误差度量 | Quadric Error Metric | 衡量曲面简化误差的度量方法 |

# Reference
